---
import Footer from "../components/Footer.astro";
import Navbar from "../components/Navbar.astro";
import "../styles/global.css";
---

<!doctype html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- AOS CSS -->
    <link href="https://unpkg.com/aos@2.3.4/dist/aos.css" rel="stylesheet" />

    <title>Desa Srimulya Jaya</title>
  </head>

  <body class="bg-slate-50 text-slate-800">
    <Navbar />

    <main class="mx-auto max-w-7xl px-4 py-10">
      <slot />
    </main>

    <Footer />

    <!-- Scroll To Top Button -->
    <button
      id="scrollToTop"
      class="fixed bottom-6 right-6 hidden h-12 w-12 items-center justify-center rounded-full bg-blue-600 text-white shadow-lg transition hover:bg-blue-700 z-50"
      aria-label="Kembali ke atas"
    >
      â†‘
    </button>

    <!-- AOS JS -->
    <script src="https://unpkg.com/aos@2.3.4/dist/aos.js"></script>

    <!-- Script Global -->
    <script>
      // INIT AOS
      AOS.init({
        duration: 800,
        once: true,
        easing: "ease-out-cubic",
      });

      // Scroll To Top
      const scrollBtn = document.getElementById("scrollToTop");

      window.addEventListener("scroll", () => {
        if (window.scrollY > 300) {
          scrollBtn.classList.remove("hidden");
          scrollBtn.classList.add("flex");
        } else {
          scrollBtn.classList.add("hidden");
          scrollBtn.classList.remove("flex");
        }
      });

      scrollBtn.addEventListener("click", () => {
        window.scrollTo({
          top: 0,
          behavior: "smooth",
        });
      });

      // Slider
      const slider = document.getElementById("slider");
      const dots = document.querySelectorAll(".dot");
      let index = 0;

      function showSlide(i) {
        if (!slider) return;

        slider.style.transform = `translateX(-${i * 100}%)`;

        dots.forEach((dot, idx) => {
          dot.classList.toggle("bg-white", idx === i);
          dot.classList.toggle("bg-white/50", idx !== i);
        });
      }

      dots.forEach((dot, i) => {
        dot.addEventListener("click", () => {
          index = i;
          showSlide(index);
        });
      });

      if (dots.length > 0) {
        setInterval(() => {
          index = (index + 1) % dots.length;
          showSlide(index);
        }, 5000);

        showSlide(index);
      }
    </script>
  </body>
</html>
