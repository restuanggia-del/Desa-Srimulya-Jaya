---
import Footer from "../components/Footer.astro";
import Navbar from "../components/Navbar.astro";
import "../styles/global.css";
---

<!doctype html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Desa Srimulya Jaya</title>
  </head>

  <body class="bg-slate-50 text-slate-800">
    <Navbar />

    <main class="mx-auto max-w-7xl px-4 py-10">
      <slot />
    </main>

    <Footer />

    <button
      id="scrollToTop"
      class="fixed bottom-6 right-6 hidden h-12 w-12 items-center justify-center rounded-full bg-blue-600 text-white shadow-lg transition hover:bg-blue-700 cursor-pointer z-50"
      aria-label="Kembali ke atas"
    >
      â†‘
    </button>

    <script>
      const scrollBtn = document.getElementById("scrollToTop");

      window.addEventListener("scroll", () => {
        if (window.scrollY > 300) {
          scrollBtn.classList.remove("hidden");
          scrollBtn.classList.add("flex");
        } else {
          scrollBtn.classList.add("hidden");
          scrollBtn.classList.remove("flex");
        }
      });

      scrollBtn.addEventListener("click", () => {
        window.scrollTo({
          top: 0,
          behavior: "smooth",
        });
      });

      const slider = document.getElementById("slider");
      const dots = document.querySelectorAll(".dot");
      let index = 0;

      function showSlide(i) {
        slider.style.transform = `translateX(-${i * 100}%)`;

        dots.forEach((dot, idx) => {
          dot.classList.toggle("bg-white", idx === i);
          dot.classList.toggle("bg-white/50", idx !== i);
        });
      }

      dots.forEach((dot, i) => {
        dot.addEventListener("click", () => {
          index = i;
          showSlide(index);
        });
      });

      setInterval(() => {
        index = (index + 1) % dots.length;
        showSlide(index);
      }, 5000);

      showSlide(index);
    </script>
  </body>
</html>
